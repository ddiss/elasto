def options(opt):
	opt.load('compiler_c')

def configure(conf):
	conf.load('compiler_c')
	conf.env.append_unique('CFLAGS', ['-Wall', '-g', '-fPIC'])

def build(bld):
	bld.stlib(source='''xml.c azure_req.c s3_req.c op.c sign.c
			    base64.c conn.c azure_ssl.c dbg.c data.c''',
		  target='elasto',
		  lib=['curl','xml2','crypto'],
		  use=['ccan'],
		  includes = '. ..')
	bld.install_as('${INCLUDEDIR}/elasto/data.h', 'data_api.h')
